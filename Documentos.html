<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Documentos - TMIS</title>

  <!-- CSS BASE DO SISTEMA -->
  <link rel="stylesheet" href="base.css">
  <link rel="stylesheet" href="Documentos.css" />

  <!-- Ícones -->
  <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
  />

  <link rel="shortcut icon" href="Imagens/favicon.ico" type="image/x-icon" />
</head>

<body>

<!-- ================= HEADER ================= -->
<header class="top-header">
  <div class="logo">
    <img src="Imagens/01 - logo_le.png" alt="Logo TMIS" />
  </div>

  <div class="user-area">
    <i class="fas fa-bell"></i>
    <i class="fas fa-cog"></i>
    <span class="user-name">
      Samuel Lima <i class="fas fa-caret-down"></i>
    </span>
  </div>
</header>

<!-- ================= MENU ================= -->
<nav class="nav-bar">
  <a href="Home.html"><i class="fas fa-house"></i> Área de trabalho</a>
  <a href="clientes.html"><i class="fas fa-user-group"></i> Clientes</a>
  <a href="Processos.html"><i class="fas fa-scale-balanced"></i> Processos</a>
  <a class="active" href="Documentos.html">
    <i class="fas fa-file-lines"></i> Documentos
  </a>
  <a href="Publicações.html"><i class="fas fa-newspaper"></i> Publicações</a>
  <a href="Relatórios.html"><i class="fas fa-chart-line"></i> Relatórios</a>
  <a href="agenda.html"><i class="fa-solid fa-calendar-days"></i> Agenda</a>
  <a href="Configações.html"><i class="fas fa-gear"></i> Configurações</a>
  <a href="suporte.html"><i class="fas fa-headset"></i> Suporte</a>
</nav>

<!-- ================= CONTEÚDO ================= -->
<main class="content-container">

  <!-- ===== MODELOS DE DOCUMENTOS ===== -->
  <section class="section-header">
    <div class="title-with-icon">
      <i class="fas fa-folder-open"></i>
      <h2>MODELOS DE DOCUMENTOS</h2>
    </div>

    <button type="button" class="btn-add-model" onclick="doc_openUploadModal()">
      <i class="fas fa-upload"></i> ENVIAR MODELO
    </button>
  </section>

  <div class="cards-grid" id="modelosContainer"></div>

  <!-- ===== DOCUMENTOS GERADOS ===== -->
  <section class="section-header" style="margin-top: 60px;">
    <div class="title-with-icon">
      <i class="fas fa-file-contract"></i>
      <h2>DOCUMENTOS GERADOS</h2>
    </div>
  </section>

  <div class="cards-grid" id="contratosContainer"></div>

</main>

<!-- ================= MODAL CRIAR DOCUMENTO (AVANÇADO) ================= -->
<div id="docOverlay" class="overlay">
  <div class="doc-modal doc-modal-large">

    <!-- HEADER -->
    <div class="doc-modal-header">
      <div>
        <h3 id="modalTitulo">Composição do Documento</h3>
        <small class="doc-model-name">Modelo selecionado</small>
      </div>

      <div class="doc-header-actions">
        <input
          type="text"
          placeholder="Buscar cliente (em breve)"
          disabled
          class="doc-search"
        >
        <button type="button" class="doc-close" onclick="doc_closeCreateModal()">
          &times;
        </button>
      </div>
    </div>

    <!-- FORM: envolve left + right para permitir envio tradicional -->
    <form id="formCriarDocumento" action="gerar_documento.php" method="POST">
      <input type="hidden" name="modelo" id="modeloSelecionado" value="">

      <!-- CORPO -->
      <div class="doc-modal-body">

        <!-- COLUNA ESQUERDA -->
        <div class="doc-form-area">

          <!-- SELETOR PF / PJ -->
          <div class="doc-type-selector" role="tablist" aria-label="Tipo de Cliente">
            <button type="button" class="active">Pessoa Física</button>
            <button type="button">Pessoa Jurídica</button>
          </div>

          <!-- ABAS -->
          <div class="doc-tabs" role="tablist" aria-label="Abas">
            <button type="button" class="active">Informações Pessoais</button>
            <button type="button">Complementares</button>
            <button type="button">Documentação</button>
          </div>

          <!-- ABA 1 -->
          <div class="doc-tab-content active" id="tab-dados">

            <h4>Dados Principais</h4>

            <!-- GRID: campos com data-pf / data-pj -->
            <div class="doc-grid">

              <!-- PF fields -->
              <div data-pf>
                <label>Nome do Cliente *</label>
                <input type="text" name="NOME" placeholder="Nome completo" required>
              </div>

              <div data-pf>
                <label>Profissão</label>
                <input type="text" name="PROFISSAO">
              </div>

              <div data-pf>
                <label>Estado Civil</label>
                <select name="ESTADO_CIVIL">
                  <option>Selecione</option>
                  <option>Solteiro</option>
                  <option>Casado</option>
                  <option>Divorciado</option>
                  <option>Viúvo</option>
                  <option>União Estável</option>
                </select>
              </div>

              <div data-pf>
                <label>Nacionalidade</label>
                <select name="NACIONALIDADE">
                  <option>Brasileira</option>
                  <option>Estrangeira</option>
                </select>
              </div>

              <div data-pf>
                <label>RG</label>
                <input type="text" name="RG">
              </div>

              <div data-pf>
                <label>Órgão Emissor</label>
                <input type="text" name="ORGAO_EMISSOR">
              </div>

              <div data-pf>
                <label>CPF *</label>
                <input type="text" name="CPF_CNPJ" placeholder="000.000.000-00" required>
              </div>

              <!-- PJ fields (hidden by default; shown when PJ selected) -->
              <div data-pj style="display:none;">
                <label>Razão Social *</label>
                <input type="text" name="RAZAO_SOCIAL" placeholder="Razão social">
              </div>

              <div data-pj style="display:none;">
                <label>Nome Fantasia</label>
                <input type="text" name="NOME_FANTASIA">
              </div>

              <div data-pj style="display:none;">
                <label>CNPJ *</label>
                <input type="text" name="CNPJ" placeholder="00.000.000/0000-00">
              </div>

              <div data-pj style="display:none;">
                <label>Inscrição Estadual / Municipal</label>
                <input type="text" name="INSCRICAO_ESTADUAL">
              </div>

            </div> <!-- .doc-grid -->

            <h4>Contato</h4>
            <div class="doc-grid">
              <div>
                <label>Telefone</label>
                <input type="text" name="TELEFONE" placeholder="(00) 00000-0000">
              </div>
              <div>
                <label>Email</label>
                <input type="email" name="EMAIL" placeholder="email@exemplo.com">
              </div>
            </div>

            <h4>Endereço</h4>
            <div class="doc-grid">
              <div>
                <label>CEP</label>
                <input type="text" name="CEP">
              </div>

              <div>
                <label>Rua / Logradouro</label>
                <input type="text" name="RUA">
              </div>

              <div>
                <label>Nº</label>
                <input type="text" name="NUMERO">
              </div>

              <div>
                <label>Bairro</label>
                <input type="text" name="BAIRRO">
              </div>

              <div>
                <label>Cidade</label>
                <input type="text" name="CIDADE">
              </div>

              <div>
                <label>UF</label>
                <select name="UF">
                  <option>Selecione</option>
                  <option>AC</option><option>AL</option><option>AP</option><option>AM</option>
                  <option>BA</option><option>CE</option><option>DF</option><option>ES</option>
                  <option>GO</option><option>MA</option><option>MT</option><option>MS</option>
                  <option>MG</option><option>PA</option><option>PB</option><option>PR</option>
                  <option>PE</option><option>PI</option><option>RJ</option><option>RN</option>
                  <option>RS</option><option>RO</option><option>RR</option><option>SC</option>
                  <option>SP</option><option>SE</option><option>TO</option>
                </select>
              </div>

              <div>
                <label>Complemento</label>
                <input type="text" name="COMPLEMENTO">
              </div>
            </div> <!-- .doc-grid -->

            <button type="button" class="btn-add-client">
              <i class="fas fa-plus"></i> Adicionar cliente
            </button>

          </div> <!-- .doc-tab-content (Dados) -->

          <!-- ABA 2 -->
          <div class="doc-tab-content" id="tab-complementares">
            <h4>Serviço</h4>

            <label>Descrição dos Serviços</label>
            <textarea name="SERVICO_DESC" rows="4"></textarea>

            <label>Honorários Advocatícios (por extenso)</label>
            <textarea name="HONORARIOS" rows="2"></textarea>
          </div>

          <!-- ABA 3 -->
          <div class="doc-tab-content" id="tab-documentacao">
            <h4>Documentação</h4>
            <p>
              Os documentos principais (CPF/CNPJ e RG) já foram preenchidos na aba anterior.
              Aqui você pode adicionar observações sobre documentos adicionais (CTPS, CNH, Passaporte etc.).
            </p>
          </div>

        </div> <!-- .doc-form-area -->

        <!-- COLUNA DIREITA -->
        <aside class="doc-side-panel">

          <h4>Clientes adicionados</h4>

          <ul class="doc-client-list" id="docClientList">
            <!-- Itens adicionados pelo JS -->
            <li style="display:none;" id="docClientEmptyMsg">Nenhum cliente adicionado.</li>
          </ul>

          <!-- botão que SUBMETA o form; JS pode interceptar para preparar os placeholders -->
          <button type="submit" class="btn-generate-doc">
            <i class="fas fa-file-word"></i> Gerar Documento
          </button>

        </aside>

      </div> <!-- .doc-modal-body -->
    </form>

  </div>
</div>


<!-- ================= MODAL UPLOAD MODELO ================= -->
<div id="uploadOverlay" class="overlay">
  <div class="modal">

    <div class="modal-header">
      <h3><i class="fas fa-file-upload"></i> Novo Modelo</h3>
      <button type="button" class="close-modal" onclick="doc_closeUploadModal()">
        &times;
      </button>
    </div>

    <form
      action="upload_modelo.php"
      method="POST"
      enctype="multipart/form-data"
      id="formUploadModelo"
    >
      <label for="nomeModelo">Nome do Modelo</label>
      <input
        type="text"
        id="nomeModelo"
        name="nome_modelo"
        placeholder="Ex: Contrato Padrão"
        required
      >

      <input type="hidden" name="confirmar" id="confirmarUpload" value="0">

      <label for="uploadArquivo" class="file-label">
        <i class="fas fa-file-word"></i>
        Selecionar arquivo DOCX
      </label>

      <input
        type="file"
        id="uploadArquivo"
        name="arquivo"
        accept=".docx"
        hidden
        required
        onchange="
          document.getElementById('nomeArquivo').innerText =
          this.files[0]?.name || 'Nenhum arquivo selecionado'
        "
      >

      <span id="nomeArquivo" class="file-name">
        Nenhum arquivo selecionado
      </span>

      <button type="submit" class="btn-confirmar">
        <i class="fas fa-save"></i> SALVAR MODELO
      </button>
    </form>

  </div>
</div>

<!-- ================= MODAL EDITAR MODELO ================= -->
<div id="editarOverlay" class="overlay">
  <div class="editar-modal">

    <div class="editar-header">
      <h3><i class="fas fa-pen"></i> Editar Modelo</h3>
      <button type="button" class="editar-close" onclick="doc_closeEditModal()">
        &times;
      </button>
    </div>

    <form action="editar_modelo.php" method="POST" enctype="multipart/form-data">
      <input type="hidden" name="arquivo_antigo" id="editarArquivoAntigo">

      <label>Novo nome do modelo</label>
      <input type="text" name="novo_nome" id="editarNomeModelo" required>

      <label class="file-label">
        <i class="fas fa-file-word"></i>
        Substituir arquivo DOCX (opcional)
        <input type="file" name="novo_arquivo" accept=".docx" hidden>
      </label>

      <button type="submit" class="btn-confirmar">
        <i class="fas fa-save"></i> SALVAR ALTERAÇÕES
      </button>
    </form>

  </div>
</div>

<!-- ================= JAVASCRIPT ================= -->
<script src="documentos.js"></script>

</body>
</html>
